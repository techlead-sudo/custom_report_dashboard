<odoo>
    <record id="view_dashboard_missed_report_search" model="ir.ui.view">
        <field name="name">dashboard.missed.report.search</field>
        <field name="model">dashboard.missed.report</field>
        <field name="arch" type="xml">
            <search>
                <field name="employee_id"/>
                <field name="department_id"/>
                <filter string="Current Month" name="missed_current_month" domain="[('has_missed_current_month', '=', True)]"/>
                <filter string="Today" name="missed_today" domain="[('has_missed_today', '=', True)]"/>
                <filter string="Last Day" name="missed_yesterday" domain="[('has_missed_yesterday', '=', True)]"/>
                <separator/>
                <group string="Tag">
                    <filter string="Red" name="missed_tag_red" domain="[('has_tag_red','=',True)]"/>
                    <filter string="Blue" name="missed_tag_blue" domain="[('has_tag_blue','=',True)]"/>
                    <filter string="Green" name="missed_tag_green" domain="[('has_tag_green','=',True)]"/>
                </group>
            </search>
        </field>
    </record>
    <record id="view_dashboard_report_tree" model="ir.ui.view">
        <field name="name">dashboard.report.tree</field>
        <field name="model">dashboard.report</field>
        <field name="arch" type="xml">
            <tree>
                <field name="name"/>
                <field name="employee_id"/>
                <field name="employee_department_id" string="Department"/>
                <field name="working_hours"/>
                <field name="report_type"/>
                <field name="submitted_on"/>
                <field name="is_late"/>
                <field name="is_missed"/>
                <field name="manager_marks"/>
                <field name="tag"/>
            </tree>
        </field>
    </record>

    <record id="view_dashboard_report_graph" model="ir.ui.view">
        <field name="name">dashboard.report.graph</field>
        <field name="model">dashboard.report</field>
        <field name="arch" type="xml">
            <graph string="Working Hours by Employee" type="bar">
                <field name="employee_id" groupby="1"/>
                <field name="working_hours" type="measure"/>
            </graph>
        </field>
    </record>

    <record id="view_dashboard_report_pivot" model="ir.ui.view">
        <field name="name">dashboard.report.pivot</field>
        <field name="model">dashboard.report</field>
        <field name="arch" type="xml">
            <pivot string="Working Hours by Department">
                <field name="department_id" groupby="1"/>
                <field name="working_hours" type="measure"/>
            </pivot>
        </field>
    </record>

    <record id="view_dashboard_report_calendar" model="ir.ui.view">
        <field name="name">dashboard.report.calendar</field>
        <field name="model">dashboard.report</field>
        <field name="arch" type="xml">
            <calendar string="Dashboard Reports" date_start="report_date" color="employee_id" mode="month">
                <field name="name"/>
                <field name="employee_id"/>
                <field name="working_hours"/>
            </calendar>
        </field>
    </record>

    <!-- Search view: current month filter and date selector -->
    <record id="view_dashboard_report_search" model="ir.ui.view">
        <field name="name">dashboard.report.search</field>
        <field name="model">dashboard.report</field>
        <field name="arch" type="xml">
            <search>
                <!-- quick fields -->
                <field name="report_date"/>
                <field name="employee_id"/>
                <field name="department_id"/>
                <field name="tag"/>

                <!-- named filters -->
                <filter string="Current Month" name="current_month" domain="[('is_current_month', '=', True)]"/>
                <filter string="Today" name="today" domain="[('is_today', '=', True)]"/>
                <filter string="Last Day" name="last_day" domain="[('is_yesterday', '=', True)]"/>

                <separator/>
                <group string="Tag">
                    <filter string="Red" name="tag_red" domain="[('tag', '=', 'red')]"/>
                    <filter string="Blue" name="tag_blue" domain="[('tag', '=', 'blue')]"/>
                    <filter string="Green" name="tag_green" domain="[('tag', '=', 'green')]"/>
                </group>

                <separator/>
                <group string="Group By">
                    <filter string="Date" name="group_date" context="{'group_by': 'report_date:day'}"/>
                    <filter string="Employee" name="group_employee" context="{'group_by': 'employee_id'}"/>
                    <filter string="Department" name="group_department" context="{'group_by': 'department_id'}"/>
                    <filter string="Tag" name="group_tag" context="{'group_by': 'tag'}"/>
                </group>
            </search>
        </field>
    </record>

    <!-- Main Dashboard Overview (shows all graphs) -->
    <record id="action_dashboard_overview" model="ir.actions.act_window">
        <field name="name">Dashboard Overview</field>
        <field name="res_model">dashboard.report</field>
        <field name="view_mode">tree,graph,calendar</field>
        <field name="views" eval="[(ref('view_dashboard_report_tree'), 'tree'), (ref('view_dashboard_report_graph'), 'graph')]"/>
        <field name="context">{"search_default_current_month": 1}</field>
        <field name="search_view_id" ref="view_dashboard_report_search"/>
        <field name="help" type="html">
            <p class="o_view_nocontent_smiling_face">
                Overview of all key reports in graphical format.
            </p>
        </field>
    </record>

    <!-- By Employee (Monthly Work Hours) -->
    <record id="view_dashboard_employee_month_tree" model="ir.ui.view">
        <field name="name">dashboard.employee.monthly.tree</field>
        <field name="model">dashboard.employee.monthly</field>
        <field name="arch" type="xml">
            <tree string="Monthly Work Hours" create="false" edit="false" delete="false" default_order="employee_id">
                <field name="employee_id" string="Employee"/>
                <field name="department_id" string="Department"/>
                <field name="report_month" string="Month"/>
                <field name="working_hours" string="Working Hours"/>
            </tree>
        </field>
    </record>

    <record id="view_dashboard_employee_month_search" model="ir.ui.view">
        <field name="name">dashboard.employee.monthly.search</field>
        <field name="model">dashboard.employee.monthly</field>
        <field name="arch" type="xml">
            <search>
                <field name="employee_id"/>
                <field name="department_id"/>
                <!-- No filters referencing report_type or tag -->
            </search>
        </field>
    </record>

    <record id="action_dashboard_by_employee_month" model="ir.actions.act_window">
        <field name="name">By Employee (Monthly)</field>
        <field name="res_model">dashboard.employee.monthly</field>
        <field name="view_mode">tree</field>
        <field name="views" eval="[(ref('view_dashboard_employee_month_tree'), 'tree')]"/>
        <field name="domain" eval="[]"/>
        <field name="context">{"search_default_current_month": 1}</field>
        <field name="search_view_id" ref="view_dashboard_employee_month_search"/>
    </record>

    <!-- By Department (Monthly Work Hours) -->
    <record id="view_dashboard_department_month_tree" model="ir.ui.view">
        <field name="name">dashboard.department.monthly.tree</field>
        <field name="model">dashboard.department.monthly</field>
        <field name="arch" type="xml">
            <tree string="Department Monthly Work Hours">
                <field name="department_id" string="Department"/>
                <field name="report_month" string="Month"/>
                <field name="working_hours" string="Working Hours"/>
                <field name="employee_ids" string="Employees">
                    <tree editable="false">
                        <field name="employee_id" string="Employee"/>
                        <field name="working_hours" string="Working Hours"/>
                    </tree>
                </field>
            </tree>
        </field>
    </record>

    <record id="view_dashboard_department_month_search" model="ir.ui.view">
        <field name="name">dashboard.department.monthly.search</field>
        <field name="model">dashboard.department.monthly</field>
        <field name="arch" type="xml">
            <search>
                <field name="department_id"/>
            </search>
        </field>
    </record>

    <record id="action_dashboard_by_department_month" model="ir.actions.act_window">
        <field name="name">By Department (Monthly)</field>
        <field name="res_model">dashboard.department.monthly</field>
        <field name="view_mode">tree</field>
        <field name="views" eval="[(ref('view_dashboard_department_month_tree'), 'tree')]"/>
        <field name="context">{"search_default_current_month": 1}</field>
        <field name="search_view_id" ref="view_dashboard_department_month_search"/>
    </record>

    <!-- By Employee (Daily Work Hours) - tree view only (kanban removed) -->
    <record id="view_dashboard_report_employee_daily_tree" model="ir.ui.view">
        <field name="name">dashboard.report.employee.daily.tree</field>
        <field name="model">dashboard.report</field>
        <field name="arch" type="xml">
            <tree decoration-danger="tag == 'red'" decoration-info="tag == 'blue'" decoration-success="tag == 'green'">
                <field name="report_date" string="Date"/>
                <field name="employee_id" string="Employee"/>
                <field name="department_id" string="Department"/>
                <field name="working_hours" string="Working Hour"/>
                <field name="tag" string="Tag" widget="badge" options="{'style': 'color'}"/>
            </tree>
        </field>
    </record>

    <record id="action_dashboard_by_employee_day" model="ir.actions.act_window">
        <field name="name">By Employee (Daily Work Hours)</field>
        <field name="res_model">dashboard.report</field>
        <field name="view_mode">tree,graph,calendar</field>
        <field name="views" eval="[(ref('view_dashboard_report_employee_daily_tree'), 'tree'), (ref('view_dashboard_report_graph'), 'graph')]"/>
        <field name="domain">[('report_type','=','dwr')]</field>
        <field name="context">{"search_default_groupby_employee_id":1, "search_default_current_month": 1}</field>
        <field name="search_view_id" ref="view_dashboard_report_search"/>
    </record>

    <!-- By Department (Daily Work Hours) -->
    <record id="action_dashboard_by_department_day" model="ir.actions.act_window">
        <field name="name">By Department (Daily)</field>
        <field name="res_model">dashboard.report</field>
        <field name="view_mode">tree,graph</field>
        <field name="views" eval="[(ref('view_dashboard_report_tree'), 'tree'), (ref('view_dashboard_report_graph'), 'graph')]"/>
        <field name="context">{"group_by": ["department_id", "report_date"]}</field>
    </record>

    <!-- By Employee (Hours Tag) -->
    <record id="action_dashboard_by_employee_tag" model="ir.actions.act_window">
        <field name="name">By Employee (Hours Tag)</field>
        <field name="res_model">dashboard.report</field>
        <field name="view_mode">tree,graph,calendar</field>
        <field name="views" eval="[(ref('view_dashboard_report_tree'), 'tree'), (ref('view_dashboard_report_graph'), 'graph')]"/>
        <field name="context">{"group_by": ["employee_id", "tag"], "search_default_current_month": 1}</field>
        <field name="search_view_id" ref="view_dashboard_report_search"/>
    </record>

    <!-- Missed Reports: show counts per employee -->
    <record id="view_dashboard_missed_report_tree" model="ir.ui.view">
        <field name="name">dashboard.missed.report.tree</field>
        <field name="model">dashboard.missed.report</field>
        <field name="arch" type="xml">
            <tree string="Missed Reports">
                <field name="employee_id"/>
                <field name="total_working_days" string="Working Days"/>
                <field name="dwr_submitted_count" string="DWR Submitted"/>
                <field name="missed_pod" string="Missed POD"/>
                <field name="missed_sod" string="Missed SOD"/>
                <field name="missed_dwr" string="Missed DWR"/>
            </tree>
        </field>
    </record>

    <record id="action_dashboard_missed_reports" model="ir.actions.act_window">
        <field name="name">Missed Reports</field>
        <field name="res_model">dashboard.missed.report</field>
        <field name="view_mode">tree</field>
        <field name="views" eval="[(ref('view_dashboard_missed_report_tree'), 'tree')]"/>
        <field name="context">{'search_default_missed_current_month': 1}</field>
        <field name="search_view_id" ref="view_dashboard_missed_report_search"/>
    </record>

    <!-- Menus -->
    <menuitem id="menu_dashboard_report_root" name="Dashboard" sequence="10" action="action_dashboard_overview" groups="hr.group_hr_manager"/>
    <menuitem id="menu_dashboard_by_employee_day" name="By Employee (Daily Work Hours)" parent="menu_dashboard_report_root" action="action_dashboard_by_employee_day" sequence="10"/>
    <!-- Removed: By Department (Daily Work Hours) menu was intentionally removed -->
    <menuitem id="menu_dashboard_by_employee_tag" name="By Employee (Hours Tag: blue/red/green)" parent="menu_dashboard_report_root" action="action_dashboard_by_employee_tag" sequence="30"/>
    <menuitem id="menu_dashboard_by_employee_month" name="By Employee (Monthly Work Hours)" parent="menu_dashboard_report_root" action="action_dashboard_by_employee_month" sequence="40"/>
    <menuitem id="menu_dashboard_by_department_month" name="By Department (Monthly Work Hours)" parent="menu_dashboard_report_root" action="action_dashboard_by_department_month" sequence="50"/>
    <menuitem id="menu_dashboard_missed_reports" name="Missed Reports (POD/SOD/DWR)" parent="menu_dashboard_report_root" action="action_dashboard_missed_reports" sequence="15"/>
</odoo>
